// Adaptive priority - css/priority.css


// Medium devices (tablets, 48rem and up)
@media (min-width: 48rem) {


  // Header - medium
  .site-header { height: auto; }

  .site-header > .gutenberg-container {
    @include flex;
    @include flex-wrap(wrap);
    @include justify-content(space-between);
  }

  $headerh: 6rem;
  $logoh: 5rem;

  .site-header .logo-div {
    display: block;
  }

  .site-header .logo-div { height: $headerh; }

  .site-header .logo-a { width: 100%; }

  .site-header .logo-img { height: $logoh; width: auto; max-width: 100%; }



  // Nav - medium

  // 0. undoing mobile stuff
  .nav { @include flex; @include align-items(center); }

  #navmenu:not(.show) { display: block; }

  #navmenu.collapse, #navmenu.collapse.show { overflow: visible; }

  .nav { float: left; padding-left: 2rem; }

  .navbar-toggler { display: none; }

  .navbar-collapse { overflow-x: unset; }
  .navbar-collapse.collapse,
  .navbar-collapse.collapse.show { display: block; clip-path: unset; }

  .menu   > ul         > li,
  #navmenu .navbar-nav > li {
    display: inline-block;
    overflow: hidden;
    text-transform: unset;
  }


  // hide the mobile caret
  #navmenu .navbar-nav > .menu-item-has-children > .open-submenu-a {
    display: none;
  }

  $padding-left: 1.5rem;
  $padding-nochildren-right: $padding-left;
  $padding-haschildren-right: 2.25rem;

  .menu > ul,
  #navmenu .navbar-nav {
    margin-right: calc( -1 * #{$padding-left});

    &> li > [href]:not([href='#']) {
      border-bottom: none;
      padding-top: 1rem;
      padding-left: $padding-left;
      padding-bottom: 1rem;
      @include transition(color .2s ease-in-out);
    }

    &> li:not(.menu-item-has-children) > [href]:not([href='#']) {
      padding-right: $padding-nochildren-right;
    }

    &> li.menu-item-has-children > [href]:not([href='#']) {
      padding-right: $padding-haschildren-right;
    }
  }

  .menu, #navmenu {
    width: auto;
    background: none;
    position: unset;
  }

  #navmenu > .container-on-mobile { width: auto; }



  // 1a. Submenu - medium
  //    sub-menu - menu - children -
  #navmenu .navbar-nav > .menu-item-has-children > .open-submenu-a + .sub-menu {
    background: none;  // undoing mobile
    overflow: visible; // so tertiary menu shows
  }

  .menu > ul,
  .menu > ul > li,
  #navmenu .navbar-nav,
  #navmenu .navbar-nav > li { overflow: visible; }

  // first order sub-menu
  #navmenu .navbar-nav > .menu-item-has-children {

    &> .sub-menu {

      width: 14rem;
      background: none;
      position: absolute;
       left: 9999px;
     }

     &.hover, &.show { .sub-menu { left: 0; } }
  }


  // rightmost nav item has a subnav positioned differently
  #navmenu .navbar-nav > .menu-item:last-of-type {
    &.menu-item-has-children {
      &.hover, &.show {
        .sub-menu {
          left: unset;
          right: 0;
        }
      }
    }
  }

  #navmenu .navbar-nav > .menu-item-has-children > [href]:not([href="#"]) {
    &:hover, &:active, &:focus {
      + .sub-menu {
        left: 0;
      }
    }
  }


  // 1b. Has children - medium
  #navmenu .navbar-nav > .menu-item-has-children:after {
    width: 1rem;
    height: .5rem;

    // caret - decoration only
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='8' overflow='visible'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='1e1e1e' d='M12.598 0L6.529 5.859 0 0h12.598z'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    content: '';
    display: block;
    position: absolute;
     top: 1.5rem;
     right: .5rem;
    z-index: -1;
  }



  #navmenu .navbar-nav > .menu-item-has-children > .open-submenu-a + .sub-menu [href]:not([href="#"]) { padding: 1rem; }



  // 2. Hovers
  .menu > ul,
  #navmenu .navbar-nav {
    [href]:not([href="#"]) {
      @include hover {
        background: none;
      }
    }
  }



  // 3. Current
  %current-nav-a-before { left: .25rem; }

  %top-nav-a-before-no-children,
  %top-nav-a-before-has-children {
    height: .05rem;
    border-radius: unset;
     top: unset;
     bottom: 0;
     left: $padding-left;
  }

  // no children - medium
  #navmenu .menu > ul >  .current_page_ancestor,
  #navmenu .navbar-nav > .current-menu-ancestor {
    &> [href]:not([href='#']):before {
      width: calc( 50% - #{$padding-left} );
      height: .05rem;
      background: $nearblack;
      content: '';
      display: block;
      position: absolute;
       bottom: 0;
       left: $padding-left;
    }
  }

  // has children - medium
  #navmenu .menu > ul >  .current_page_ancestor.page_item_has_children,
  #navmenu .navbar-nav > .current-menu-ancestor.menu-item-has-children {
    &> [href]:not([href='#']):before {
      width: calc( (100% - #{$padding-left} - #{$padding-haschildren-right} ) / 2 );
      left: $padding-left;
    }
  }

  // no children - medium
  #navmenu .menu > ul >  .current_page_ancestor,
  #navmenu .navbar-nav > .current-menu-ancestor,
  #navmenu .menu > ul >  .current_page_item,
  #navmenu .navbar-nav > .current-menu-item {
    &> [href]:not([href='#']):after {
      width: calc( 50% - #{$padding-left} );
      height: .05rem;
      background: $nearblack;
      content: '';
      display: block;
      position: absolute;
       bottom: 0;
       right: $padding-left;
    }
  }

  // has children - medium
  #navmenu .menu > ul >  .current_page_ancestor.page_item_has_children,
  #navmenu .navbar-nav > .current-menu-ancestor.menu-item-has-children,
  #navmenu .menu > ul >  .current_page_item.page_item_has_children,
  #navmenu .navbar-nav > .current-menu-item.menu-item-has-children {
    &> [href]:not([href='#']):after {
      width: calc( (100% - #{$padding-left} - #{$padding-haschildren-right} ) / 2 );
      right: $padding-haschildren-right;
    }
  }

  %top-nav-a-before-has-children {
    width: calc( (100% - #{$padding-left} - #{$padding-haschildren-right} ) / 2 );
  }

  %top-nav-a-before-no-children {
    width: calc( 50% - #{$padding-left} );
  }

  %current-page-or-current-parent-li { background: none; }








  // SEARCH - RETURN TO THIS!
  .search { display: none; }



}
